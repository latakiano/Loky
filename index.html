<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù…ØºØ§Ù…Ø±Ø© Ø§Ù„Ù‚Ø·Ø© Ù‡ÙŠÙ…Ø§Ù„Ø§ÙŠØ§ ğŸ¾</title>
    <style>
        body { margin: 0; overflow: hidden; background: #87CEEB; font-family: 'Arial', sans-serif; }
        #ui { position: absolute; top: 10px; width: 100%; text-align: center; color: #fff; z-index: 10; pointer-events: none; }
        .hero-msg { background: rgba(0,0,0,0.3); padding: 5px; border-radius: 10px; color: #f1c40f; font-weight: bold; }
        .stats { font-size: 24px; text-shadow: 2px 2px 4px #000; }
    </style>
</head>
<body>

<div id="ui">
    <div class="hero-msg">Ù‡ÙŠØ§ ÙŠØ§ Ø¨Ø·Ù„.. Ø§Ù„Ù‚Ø·Ø© Ù‡ÙŠÙ…Ø§Ù„Ø§ÙŠØ§ ØªÙ†ØªØ¸Ø± Ø§Ù„ÙƒØ£Ø³! ğŸ†</div>
    <div class="stats">
        Ø§Ù„Ù…Ø±Ø­Ù„Ø©: <span id="lvl">1</span> | 
        Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="scr">0</span> | 
        ğŸ’°: <span id="cns">0</span>
    </div>
</div>

<audio id="music" loop>
    <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3" type="audio/mpeg">
</audio>

<canvas id="game"></canvas>

<script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    const music = document.getElementById('music');

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let cat = { x: 50, y: canvas.height/2, w: 50, h: 50, v: 0, g: 0.5, j: -8 };
    let pipes = [], coins = [], score = 0, totalCoins = 0, level = 1, speed = 4, active = true, win = false;

    // Ø±Ø³Ù… Ø§Ù„Ù‚Ø·Ø© Ù‡ÙŠÙ…Ø§Ù„Ø§ÙŠØ§ (ØªÙ…Ø«ÙŠÙ„ Ø¨Ø±Ù…Ø¬Ù‰ Ø¬Ù…ÙŠÙ„)
    function drawCat(x, y) {
        ctx.save();
        // Ø¸Ù„ Ø§Ù„Ù‚Ø·Ø© Ù„ØªØ¨Ø¯Ùˆ 3D
        ctx.fillStyle = "rgba(0,0,0,0.2)";
        ctx.beginPath(); ctx.ellipse(x+25, y+55, 20, 5, 0, 0, Math.PI*2); ctx.fill();

        // Ø¬Ø³Ù… Ø§Ù„Ù‚Ø·Ø© (Ø£Ø¨ÙŠØ¶ ÙƒØ±ÙŠÙ…ÙŠ)
        ctx.fillStyle = "#F5F5DC";
        ctx.beginPath(); ctx.roundRect(x, y, 50, 40, 15); ctx.fill();
        
        // Ø§Ù„Ø£Ø°Ù†ÙŠÙ† ÙˆØ§Ù„ÙˆØ¬Ù‡ (Ø¨Ù†ÙŠ ØºØ§Ù…Ù‚ - Ù…ÙŠØ²Ø© Ø§Ù„Ù‡ÙŠÙ…Ø§Ù„Ø§ÙŠØ§)
        ctx.fillStyle = "#4B3621";
        ctx.beginPath(); ctx.moveTo(x+5, y); ctx.lineTo(x+15, y-10); ctx.lineTo(x+20, y); ctx.fill();
        ctx.beginPath(); ctx.moveTo(x+30, y); ctx.lineTo(x+35, y-10); ctx.lineTo(x+45, y); ctx.fill();
        ctx.fillRect(x+15, y+10, 20, 15); // Ù‚Ù†Ø§Ø¹ Ø§Ù„ÙˆØ¬Ù‡

        // Ø§Ù„Ø¹ÙŠÙˆÙ† Ø§Ù„Ø²Ø±Ù‚Ø§Ø¡ Ø§Ù„Ø¬Ø°Ø§Ø¨Ø©
        ctx.fillStyle = "#00BFFF";
        ctx.beginPath(); ctx.arc(x+20, y+15, 3, 0, Math.PI*2); ctx.fill();
        ctx.beginPath(); ctx.arc(x+30, y+15, 3, 0, Math.PI*2); ctx.fill();
        ctx.restore();
    }

    function createPipe() {
        let gap = 180 - (level * 2);
        let top = Math.random() * (canvas.height - gap - 100) + 50;
        let color = `hsl(${Math.random() * 360}, 70%, 50%)`;
        pipes.push({ x: canvas.width, t: top, g: gap, p: false, c: color });
        if (Math.random() > 0.4) coins.push({ x: canvas.width + 25, y: top + gap/2, collected: false });
    }

    function loop() {
        // Ø®Ù„ÙÙŠØ© Ø³Ù…Ø§ÙˆÙŠØ© Ù…Ø¹ Ø³Ø­Ø¨ Ø¨Ø³ÙŠØ·Ø©
        ctx.fillStyle = "#87CEEB"; ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        if (win) {
            ctx.fillStyle = "rgba(255,215,0,0.9)"; ctx.fillRect(0,0,canvas.width,canvas.height);
            ctx.fillStyle = "#000"; ctx.font = "bold 30px Arial"; ctx.textAlign="center";
            ctx.fillText("ğŸ¥‡ Ù…Ø¨Ø±ÙˆÙƒ ÙŠØ§ Ø¨Ø·Ù„! Ø§Ø³ØªÙ„Ù…Øª Ø§Ù„ÙƒØ£Ø³", canvas.width/2, canvas.height/2);
            return;
        }

        drawCat(cat.x, cat.y);

        pipes.forEach((p, i) => {
            p.x -= speed;
            ctx.fillStyle = p.c;
            ctx.fillRect(p.x, 0, 60, p.t);
            ctx.fillRect(p.x, p.t + p.g, 60, canvas.height);

            if (cat.x < p.x + 60 && cat.x + 40 > p.x && (cat.y < p.t || cat.y + 35 > p.t + p.g)) active = false;
            if (!p.p && p.x < cat.x) {
                score++; p.p = true; document.getElementById('scr').innerText = score;
                if (score % 5 === 0) { level++; speed += 0.5; document.getElementById('lvl').innerText = level; }
                if (level >= 20) win = true;
            }
        });

        coins.forEach((c, i) => {
            c.x -= speed;
            if (!c.collected) {
                ctx.fillStyle = "#FFD700"; ctx.beginPath(); ctx.arc(c.x, c.y, 12, 0, Math.PI*2); ctx.fill();
                if (Math.abs(cat.x - c.x) < 40 && Math.abs(cat.y - c.y) < 40) { c.collected = true; totalCoins++; document.getElementById('cns').innerText = totalCoins; }
            }
        });

        if (active) {
            cat.v += cat.g; cat.y += cat.v;
            if (cat.y > canvas.height || cat.y < 0) active = false;
            if (pipes.length === 0 || pipes[pipes.length-1].x < canvas.width - 280) createPipe();
            requestAnimationFrame(loop);
        } else {
            ctx.fillStyle = "rgba(0,0,0,0.5)"; ctx.fillRect(0,0,canvas.width,canvas.height);
            ctx.fillStyle = "#fff"; ctx.font = "25px Arial"; ctx.textAlign="center";
            ctx.fillText("Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ø§Ù‹ ÙŠØ§ Ø¨Ø·Ù„ Ø§Ù„Ù‚Ø·Ø© Ù‡ÙŠÙ…Ø§Ù„Ø§ÙŠØ§ ØªØ«Ù‚ Ø¨Ùƒ!", canvas.width/2, canvas.height/2);
        }
    }

    function start(e) {
        if (e) e.preventDefault();
        music.play();
        if (!active || win) { 
            cat.y = canvas.height/2; cat.v = 0; pipes = []; coins = []; score = 0; level = 1; speed = 4; active = true; win = false; loop(); 
        } else { cat.v = cat