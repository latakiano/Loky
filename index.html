<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù…ØºØ§Ù…Ø±Ø© Ø§Ù„Ù‚Ø·Ø© Ù‡ÙŠÙ…Ø§Ù„Ø§ÙŠØ§</title>
    <style>
        body { margin: 0; overflow: hidden; background: #87CEEB; font-family: sans-serif; }
        #ui { position: absolute; top: 10px; width: 100%; text-align: center; color: #fff; z-index: 20; pointer-events: none; }
        .msg { color: #f1c40f; font-weight: bold; font-size: 20px; text-shadow: 2px 2px 5px #000; }
    </style>
</head>
<body>

<div id="ui">
    <div class="msg">Ù‡ÙŠØ§ ÙŠØ§ Ø¨Ø·Ù„.. Ø§Ù‚Ø·Ù Ø§Ù„ÙƒÙ†ÙˆØ² ÙˆØ§Ø­Ø°Ø± Ø§Ù„Ø£Ù„ØºØ§Ù…! ğŸ†</div>
    <div style="font-size: 30px;">Ø§Ù„Ù…Ø±Ø­Ù„Ø©: <span id="lvl">1</span> | Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="scr">0</span></div>
    <div style="color: #FFD700;">ğŸ’° Ø§Ù„ÙƒÙ†ÙˆØ²: <span id="cns">0</span></div>
</div>

<audio id="music" loop>
    <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3" type="audio/mpeg">
</audio>

<canvas id="game"></canvas>

<script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    const music = document.getElementById('music');

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    // ØªØ­Ù…ÙŠÙ„ ØµÙˆØ±Ø© Ø§Ù„Ù‚Ø·Ø© Ù‡ÙŠÙ…Ø§Ù„Ø§ÙŠØ§
    const catImg = new Image();
    catImg.src = 'https://i.imgur.com/WBy6v9S.png'; // Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ù‚Ø·Ø© Ù‡ÙŠÙ…Ø§Ù„Ø§ÙŠØ§ Ø´ÙØ§ÙØ©

    let cat = { x: 50, y: canvas.height/2, w: 60, h: 60, v: 0, g: 0.5, j: -8 };
    let pipes = [], coins = [], score = 0, totalCoins = 0, level = 1, speed = 4, active = true, win = false, mStarted = false;

    const colors = ["#FF5733", "#33FF57", "#3357FF", "#F333FF", "#FF33A1", "#33FFF6"];

    function createPipe() {
        let gap = Math.max(150, 200 - (level * 2));
        let top = Math.random() * (canvas.height - gap - 100) + 50;
        pipes.push({ x: canvas.width, t: top, g: gap, p: false, c: colors[level % colors.length] });
        if (Math.random() > 0.4) coins.push({ x: canvas.width + 25, y: top + gap/2, r: 15, collected: false });
    }

    function draw() {
        ctx.fillStyle = (level >= 20) ? "#400" : "#87CEEB"; 
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        if (win) {
            ctx.fillStyle = "rgba(0,0,0,0.8)"; ctx.fillRect(0,0,canvas.width,canvas.height);
            ctx.fillStyle = "#f1c40f"; ctx.font = "bold 35px Arial"; ctx.textAlign="center";
            ctx.fillText("ğŸ† Ø£Ù†Øª Ø¨Ø·Ù„ Ø­Ù‚ÙŠÙ‚ÙŠ! Ù†Ù„Øª Ø§Ù„ÙƒØ£Ø³", canvas.width/2, canvas.height/2);
            return;
        }

        // Ø±Ø³Ù… Ø§Ù„Ù‚Ø·Ø© (Ø§Ù„ØµÙˆØ±Ø©)
        ctx.drawImage(catImg, cat.x, cat.y, cat.w, cat.h);

        // Ø±Ø³Ù… Ø§Ù„Ø­ÙˆØ§Ø¬Ø² (Ø§Ù„Ø£Ù„ØºØ§Ù…)
        pipes.forEach((p, i) => {
            p.x -= speed;
            ctx.fillStyle = p.c;
            ctx.fillRect(p.x, 0, 60, p.t);
            ctx.fillRect(p.x, p.t + p.g, 60, canvas.height);

            if (cat.x < p.x + 60 && cat.x + cat.w > p.x && (cat.y < p.t || cat.y + cat.h > p.t + p.g)) active = false;
            if (!p.p && p.x < cat.x) {
                score++; p.p = true; document.getElementById('scr').innerText = score;
                if (score % 5 === 0) { level++; speed += 0.5; document.getElementById('lvl').innerText = level; }
                if (level >= 20) win = true;
            }
            if (p.x + 60 < 0) pipes.splice(i, 1);
        });

        // Ø±Ø³Ù… Ø§Ù„ÙƒÙ†ÙˆØ²
        coins.forEach((c, i) => {
            c.x -= speed;
            if (!c.collected) {
                ctx.fillStyle = "#FFD700"; ctx.beginPath(); ctx.arc(c.x, c.y, c.r, 0, Math.PI*2); ctx.fill();
                ctx.fillStyle = "#000"; ctx.fillText("â­", c.x-5, c.y+5);
                if (Math.abs(cat.x - c.x) < 40 && Math.abs(cat.y - c.y) < 40) { c.collected = true; totalCoins++; document.getElementById('cns').innerText = totalCoins; }
            }
            if (c.x + 20 < 0) coins.splice(i, 1);
        });

        if (active)