<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù…ØºØ§Ù…Ø±Ø© Ø§Ù„ÙƒÙ‡Ù Ø§Ù„Ù…Ø±Ø¹Ø¨ ğŸ¾</title>
    <style>
        body { margin: 0; overflow: hidden; background: #050505; font-family: 'Courier New', Courier, monospace; }
        #ui { position: absolute; top: 10px; width: 100%; text-align: center; color: #ff4d4d; z-index: 20; pointer-events: none; }
        .stats { font-size: 22px; text-shadow: 0 0 10px #ff0000; letter-spacing: 2px; }
        .hero-msg { color: #f1c40f; font-size: 16px; margin-bottom: 5px; }
    </style>
</head>
<body>

<div id="ui">
    <div class="hero-msg">Ø§Ø­Ø°Ø± Ø§Ù„Ø²ÙˆØ§Ø­Ù ÙˆØ§Ù„Ø·ÙŠÙˆØ± Ø§Ù„Ø¬Ø§Ø±Ø­Ø©.. Ø§Ù‚Ø·Ù ÙƒÙ†ÙˆØ² Ø§Ù„ÙƒÙ‡Ù! ğŸ¦‡</div>
    <div class="stats">Level: <span id="lvl">1</span> | Score: <span id="scr">0</span> | ğŸ’°: <span id="cns">0</span></div>
</div>

<canvas id="gameCanvas"></canvas>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    // ØªØ­Ù…ÙŠÙ„ ØµÙˆØ±Ø© Ø§Ù„Ù‚Ø·Ø© Ø§Ù„Ù‡ÙŠÙ…Ø§Ù„Ø§ÙŠØ§ (Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©)
    const catImg = new Image();
    catImg.src = 'https://i.imgur.com/WBy6v9S.png'; 

    let cat = { x: 50, y: canvas.height/2, w: 70, h: 60, v: 0, g: 0.45, j: -8 };
    let pipes = [], coins = [], bats = [], score = 0, totalCoins = 0, level = 1, speed = 4.5, active = true, win = false;

    // Ø¯Ø§Ù„Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­ÙˆØ§Ø¬Ø² (ØµØ®ÙˆØ± Ø§Ù„ÙƒÙ‡Ù Ø§Ù„Ù…Ø¯Ø¨Ø¨Ø©)
    function createPipe() {
        let gap = Math.max(140, 200 - (level * 2));
        let top = Math.random() * (canvas.height - gap - 150) + 70;
        pipes.push({ x: canvas.width, t: top, g: gap, p: false });
        
        // ÙØ±ØµØ© Ù„Ø¸Ù‡ÙˆØ± Ø®ÙØ§Ø´ Ø£Ùˆ Ø·Ø§Ø¦Ø± Ø¬Ø§Ø±Ø­
        if (Math.random() > 0.6) {
            bats.push({ x: canvas.width + 100, y: Math.random() * canvas.height, w: 40, h: 30 });
        }
        
        // Ø§Ù„ÙƒÙ†ÙˆØ² Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©
        if (Math.random() > 0.4) {
            coins.push({ x: canvas.width + 30, y: top + gap/2, r: 12, col: false });
        }
    }

    function draw() {
        // Ø®Ù„ÙÙŠØ© Ø§Ù„ÙƒÙ‡Ù Ø§Ù„Ù…Ø±Ø¹Ø¨ (ØªØ¯Ø±Ø¬ Ù…Ù† Ø§Ù„Ø£Ø³ÙˆØ¯ Ù„Ù„Ø±Ù…Ø§Ø¯ÙŠ Ø§Ù„ØµØ®Ø±ÙŠ)
        let bgGrad = ctx.createLinearGradient(0, 0, 0, canvas.height);
        bgGrad.addColorStop(0, '#000000');
        bgGrad.addColorStop(0.5, '#1a1a1a');
        bgGrad.addColorStop(1, '#0d0d0d');
        ctx.fillStyle = bgGrad;
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Ø±Ø³Ù… "Ø§Ù„Ø¶Ø¨Ø§Ø¨" Ù„Ø¥Ø¶Ø§ÙØ© Ø¬Ùˆ Ø±Ø¹Ø¨
        ctx.fillStyle = "rgba(255, 255, 255, 0.05)";
        ctx.fillRect(Math.random()*canvas.width, 0, 2, canvas.height);

        if (win) {
            ctx.fillStyle = "rgba(0,0,0,0.9)"; ctx.fillRect(0,0,canvas.width,canvas.height);
            ctx.fillStyle = "#f1c40f"; ctx.font = "bold 30px Arial"; ctx.textAlign="center";
            ctx.fillText("ğŸ† Ù…Ø¨Ø±ÙˆÙƒ! Ø§Ù„Ø¨Ø·Ù„ Ø§Ù„Ù‡ÙŠÙ…Ø§Ù„Ø§ÙŠ Ø®ØªÙ… Ø§Ù„ÙƒÙ‡Ù", canvas.width/2, canvas.height/2);
            return;
        }

        // Ø±Ø³Ù… Ø§Ù„Ù‚Ø·Ø© Ø§Ù„Ù‡ÙŠÙ…Ø§Ù„Ø§ÙŠØ§
        ctx.drawImage(catImg, cat.x, cat.y, cat.w, cat.h);

        // Ø±Ø³Ù… ØµØ®ÙˆØ± Ø§Ù„ÙƒÙ‡Ù (Ø§Ù„Ø­ÙˆØ§Ø¬Ø²)
        pipes.forEach((p, i) => {
            p.x -= speed;
            let grad = ctx.createLinearGradient(p.x, 0, p.x + 60, 0);
            grad.addColorStop(0, '#333'); grad.addColorStop(0.5, '#555'); grad.addColorStop(1, '#222');
            ctx.fillStyle = grad;
            ctx.fillRect(p.x, 0, 60, p.t); // Ø§Ù„ØµØ®ÙˆØ± Ø§Ù„Ø¹Ù„ÙˆÙŠØ©
            ctx.fillRect(p.x, p.t + p.g, 60, canvas.height); // Ø§Ù„ØµØ®ÙˆØ± Ø§Ù„Ø³ÙÙ„ÙŠØ©

            if (cat.x < p.x + 60 && cat.x + cat.w > p.x && (cat.y < p.t || cat.y + cat.h > p.t + p.g)) active = false;
            if (!p.p && p.x < cat.x) {
                score++; p.p = true; document.getElementById('scr').innerText = score;
                if (score % 5 === 0) { level++; speed += 0.4; document.getElementById('lvl').innerText = level; }
                if (level >= 20) win = true;
            }
            if (p.x + 60 < 0) pipes.splice(i, 1);
        });

        // Ø±Ø³Ù… Ø§Ù„ÙƒÙ†ÙˆØ² (Ø¹Ù…Ù„Ø§Øª Ø°Ù‡Ø¨ÙŠØ© Ù„Ø§Ù…Ø¹Ø©)
        coins.forEach((c, i) => {
            c.x -= speed;
            if (!c.col) {
                ctx.fillStyle = "#ffd700"; ctx.beginPath(); ctx.arc(c.x, c.y, c.r, 0, Math.PI*2); ctx.fill();
                ctx.shadowBlur = 15; ctx.shadowColor = "yellow";
                if (Math.abs(cat.x - c.x) < 45 && Math.abs(cat.y - c.y) < 45) { c.col = true; totalCoins++; document.getElementById('cns').innerText = totalCoins; }
            }
            ctx.shadowBlur = 0;
            if (c.x + 20 < 0) coins.splice(i, 1);
        });

        if (active) {
            cat.v += cat.g; cat.y += cat.v;
            if (cat.y > canvas.height || cat.y < 0) active = false;
            if (pipes.length === 0 || pipes[pipes.length-1].x < canvas.width - 280) createPipe();
            requestAnimationFrame(draw);
        } else {
            ctx.fillStyle = "rgba(255,0,0,0.2)"; ctx.fillRect(0,0,canvas.width,canvas.height);
            ctx.fillStyle = "#fff"; ctx.font = "20px Arial"; ctx.textAlign="center";
            ctx.fillText("Ø³Ù‚Ø· Ø§Ù„Ø¨Ø·Ù„ ÙÙŠ ÙØ® Ø§Ù„ÙƒÙ‡Ù! Ø§Ù„Ù…Ø³ Ù„Ù„Ù…Ø­Ø§ÙˆÙ„Ø©", canvas.width/2, canvas.height/2);
        }
    }

    function reset() {
        cat.y = canvas.height/2; cat.v = 0; pipes = []; coins = []; score = 0; level = 1; speed = 4.5; active = true; win = false; draw();
    }

    const trigger = () => { if(!active || win) reset(); else cat.v = cat.j; };
    window.addEventListener('mousedown', trigger);
    window.addEventListener('touchstart', (e) => { e.preventDefault(); trigger(); }, {passive: false});

    createPipe();
    draw();
</script>
</body>
</html>