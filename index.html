<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LOKY GAME - تحدي الإنسان الطائر</title>
    <style>
        body { margin: 0; padding: 0; overflow: hidden; background: #1a1a1a; font-family: 'Arial', sans-serif; }
        canvas { display: block; }
        #ui {
            position: absolute; top: 20px; width: 100%; text-align: center;
            color: #fff; font-size: 40px; font-weight: bold; pointer-events: none;
            text-shadow: 3px 3px 5px #000;
        }
        #instructions {
            position: absolute; bottom: 20px; width: 100%; text-align: center;
            color: #aaa; font-size: 16px; pointer-events: none;
        }
    </style>
</head>
<body>

<div id="ui">0</div>
<div id="instructions">المس الشاشة للطيران وتجنب الأعمدة</div>
<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const scoreEl = document.getElementById('ui');

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let score = 0;
let gameActive = true;
let pipes = [];
const pipeWidth = 70;
const pipeGap = 190;

// كائن اللاعب (الإنسان)
const player = {
    x: 50,
    y: canvas.height / 2,
    width: 40,
    height: 45,
    velocity: 0,
    gravity: 0.6,
    jump: -9,
    angle: 0
};

function drawHuman(x, y) {
    ctx.save();
    ctx.translate(x + player.width/2, y + player.height/2);
    // تدوير الشخصية قليلاً بناءً على السقوط
    ctx.rotate(player.velocity * 0.03);
    
    // 1. الرأس
    ctx.fillStyle = "#FFDBAC"; // لون البشرة
    ctx.fillRect(-10, -22, 20, 20);
    
    // 2. الشعر
    ctx.fillStyle = "#4B2C20"; 
    ctx.fillRect(-10, -22, 20, 5);
    
    // 3. الجسم (قميص أزرق)
    ctx.fillStyle = "#3498db";
    ctx.fillRect(-12, -2, 24, 18);
    
    // 4. البنطال (أسود)
    ctx.fillStyle = "#2c3e50";
    ctx.fillRect(-12, 16, 24, 8);

    // 5. العينين
    ctx.fillStyle = "black";
    ctx.fillRect(5, -12, 3, 3);
    
    ctx.restore();
}

function createPipe() {
    let minHeight = 50;
    let maxHeight = canvas.height - pipeGap - 50;
    let height = Math.floor(Math.random() * (maxHeight - minHeight + 1)) + minHeight;
    pipes.push({ x: canvas.width, top: height, passed: false });
}

function update() {
    if (!gameActive) return;

    player.velocity += player.gravity;
    player.y += player.velocity;

    // حدود الشاشة
    if (player.y + player.height > canvas.height || player.y < 0)