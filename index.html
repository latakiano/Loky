<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LOKY - ØªØ­Ø¯ÙŠ Ø§Ù„ÙƒØ£Ø³</title>
    <style>
        /* Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„ØªØµÙ…ÙŠÙ… */
        body { margin: 0; padding: 0; overflow: hidden; background: #1a1a1a; font-family: sans-serif; }
        #game-ui { position: absolute; top: 10px; width: 100%; text-align: center; color: white; pointer-events: none; z-index: 100; }
        .lvl { color: #00f2fe; font-size: 18px; }
        .scr { font-size: 45px; font-weight: bold; text-shadow: 2px 2px 4px #000; }
        .coins { color: #f1c40f; font-size: 20px; }
    </style>
</head>
<body>

    <div id="game-ui">
        <div class="lvl" id="levelTxt">Ø§Ù„Ù…Ø±Ø­Ù„Ø©: 1</div>
        <div class="scr" id="scoreTxt">0</div>
        <div class="coins">ğŸª™ <span id="coinTxt">0</span></div>
    </div>

    <canvas id="gameCanvas"></canvas>

<script>
    // Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠ - ØªØ£ÙƒØ¯ Ù…Ù† Ù†Ø³Ø® ÙƒÙ„ Ù…Ø§ ÙŠÙ„ÙŠ Ø¨Ø¯Ù‚Ø©
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let bird = { x: 50, y: canvas.height/2, w: 30, h: 45, v: 0, g: 0.6, jump: -9 };
    let pipes = [];
    let coins = [];
    let score = 0;
    let totalCoins = 0;
    let level = 1;
    let speed = 4;
    let isRunning = true;
    let isWon = false;

    // Ø£Ù„ÙˆØ§Ù† ØªØªØºÙŠØ± Ù…Ø¹ ÙƒÙ„ Ù…Ø±Ø­Ù„Ø©
    const colors = ["#2ecc71", "#3498db", "#9b59b6", "#f1c40f", "#e67e22", "#e74c3c", "#1abc9c", "#ff7979"];

    function createPipe() {
        let gap = Math.max(160, 220 - (level * 3)); 
        let top = Math.random() * (canvas.height - gap - 120) + 60;
        pipes.push({ x: canvas.width, top: top, gap: gap, passed: false });
        
        // ÙØ±ØµØ© 50% Ù„Ø¸Ù‡ÙˆØ± Ø¹Ù…Ù„Ø© Ø°Ù‡Ø¨ÙŠØ©
        if (Math.random() > 0.5) {
            coins.push({ x: canvas.width + 25, y: top + gap/2, r: 10, collected: false });
        }
    }

    function drawHuman(x, y) {
        ctx.fillStyle = "#FFDBAC"; ctx.fillRect(x + 5, y, 20, 20); // Ø§Ù„Ø±Ø£Ø³
        ctx.fillStyle = "#3498db"; ctx.fillRect(x, y + 20, 30, 25); // Ø§Ù„Ø¬Ø³Ù…
    }

    function update() {
        if (!isRunning || isWon) return;

        bird.v += bird.g;
        bird.y += bird.v;

        if (bird.y + bird.h > canvas.height || bird.y < 0) isRunning = false;

        if (pipes.length === 0 || pipes[pipes.length - 1].x < canvas.width - 300) createPipe();

        pipes.forEach((p, i) => {
            p.x -= speed;
            // ÙØ­Øµ Ø§Ù„Ø§ØµØ·Ø¯Ø§Ù…
            if (bird.x < p.x + 60 && bird.x + bird.w > p.x && (bird.y < p.top || bird.y + bird.h > p.top + p.gap)) isRunning = false;
            
            if (!p.passed && p.x < bird.x) {
                score++;
                document.getElementById('scoreTxt').innerText = score;
                p.passed = true;
                if (score % 5 === 0 && level < 20) {
                    level++;
                    document.getElementById('levelTxt').innerText = "Ø§Ù„Ù…Ø±Ø­Ù„Ø©: " + level;
                    speed += 0.4;
                } else if (score >= 100) { isWon = true; }
            }
            if (p.x + 60 < 0) pipes.splice(i, 1);
        });

        coins.forEach((c, i) => {
            c.x -= speed;
            let dx = (bird.x + bird.w/2) - c.x;
            let dy = (bird.y + bird.h/2) - c.y;
            if (!c.collected && Math.sqrt(dx*dx + dy*dy) < 30) {
                c.collected = true;
                totalCoins++;
                document.getElementById('coinTxt').innerText = totalCoins;
            }
            if (c.x + 20 < 0) coins.splice(i, 1);
        });
    }

    function draw() {
        // Ø®Ù„ÙÙŠØ© Ø¨Ø±ÙƒØ§Ù†ÙŠØ© Ù„Ù„Ù…Ø±Ø­Ù„Ø© 20
        ctx.fillStyle = (level >= 20) ? '#4a0000' : '#1a1a1a';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        if (isWon) {
            ctx.fillStyle = "rgba(0,0,0,0.8)"; ctx.fillRect(0,0,canvas.width,canvas.height);
            ctx.fillStyle = "#f1c40f"; ctx.font = "50px Arial"; ctx.textAlign = "center";
            ctx.fillText("ğŸ† Ù…Ø¨Ø±ÙˆÙƒ!", canvas.width/2, canvas.height/2);
            ctx.font = "20px Arial"; ctx.fillText("Ø§Ø³ØªÙ„Ù…Øª Ø§Ù„ÙƒØ£Ø³ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ!", canvas.width/2, canvas.height/2 + 50);
            return;
        }

        coins.forEach(c => {
            if (!c.collected) {
                ctx.fillStyle = "#f1c40f"; ctx.beginPath();
                ctx.arc(c.x, c.y, c.r, 0, Math.PI*2); ctx.fill();
            }
        });

        drawHuman(bird.x, bird.y);

        ctx.fillStyle = colors[level % colors.length];
        pipes.forEach(p => {
            ctx.fillRect(p.x, 0, 60, p.top);
            ctx.